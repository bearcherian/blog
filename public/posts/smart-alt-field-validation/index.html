<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Smart ALT field validation :: Bear&#39;s Dev Blog</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="We had a requirement to enforce alt attributes on images. Sounds simple, just set the alt field to required. The problem is when you do that for components that use images, like Text &amp;amp; Image. If a user decides to enter text, but not use the image portion the ALT text is still required, and the alert for a missing field still appears.
To fix this we add a function to the &amp;lsquo;validator&amp;rsquo; property of the ALT Text field using CQs ExtJS."/>
<meta name="keywords" content=""/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="/posts/smart-alt-field-validation/" />


<link rel="stylesheet" href="/assets/style.css">

  <link rel="stylesheet" href="assets/%25!s%28%3cnil%3e%29.css">



<link rel="stylesheet" href="/style.css">


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/apple-touch-icon-144-precomposed.png">

<link rel="shortcut icon" href="img/favicon/%25!s%28%3cnil%3e%29.png">



<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Smart ALT field validation :: Bear&#39;s Dev Blog — " />
<meta name="twitter:description" content="We had a requirement to enforce alt attributes on images. Sounds simple, just set the alt field to required. The problem is when you do that for components that use images, like Text &amp;amp; Image. If a user decides to enter text, but not use the image portion the ALT text is still required, and the alert for a missing field still appears.
To fix this we add a function to the &amp;lsquo;validator&amp;rsquo; property of the ALT Text field using CQs ExtJS." />
<meta name="twitter:site" content="/" />
<meta name="twitter:creator" content="" />
<meta name="twitter:image" content="">


<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Smart ALT field validation :: Bear&#39;s Dev Blog — ">
<meta property="og:description" content="We had a requirement to enforce alt attributes on images. Sounds simple, just set the alt field to required. The problem is when you do that for components that use images, like Text &amp;amp; Image. If a user decides to enter text, but not use the image portion the ALT text is still required, and the alert for a missing field still appears.
To fix this we add a function to the &amp;lsquo;validator&amp;rsquo; property of the ALT Text field using CQs ExtJS." />
<meta property="og:url" content="/posts/smart-alt-field-validation/" />
<meta property="og:site_name" content="Smart ALT field validation" />
<meta property="og:image" content="">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2014-06-18 00:00:00 &#43;0000 UTC" />











</head>
<body class="">


<div class="container center">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    bear&#39;s dev blog
  </div>
</a>

    </div>
    <div class="menu-trigger">menu</div>
  </div>
  
</header>


  <div class="content">
    
  <div class="post">
    <h1 class="post-title"><a href="/posts/smart-alt-field-validation/">Smart ALT field validation</a></h1>
    <div class="post-meta">
      <span class="post-date">
        2014-06-18
      </span>
      
    </div>

    
      <span class="post-tags">
        
          #<a href="/tags/cq/">CQ</a>&nbsp;
        
          #<a href="/tags/aem/">AEM</a>&nbsp;
        
          #<a href="/tags/images/">images</a>&nbsp;
        
          #<a href="/tags/ada-compliance/">ADA compliance</a>&nbsp;
        
          #<a href="/tags/acessibility/">acessibility</a>&nbsp;
        
      </span>
    

    

    <div class="post-content">
      <p>We had a requirement to enforce alt attributes on images. Sounds simple, just set the alt field to required. The problem is when you do that for components that use images, like Text &amp; Image. If a user decides to enter text, but not use the image portion the ALT text is still required, and the alert for a missing field still appears.</p>

<p>To fix this we add a function to the &lsquo;validator&rsquo; property of the ALT Text field using CQs ExtJS. The function below invalidates the field only if the field is empty, and the image component has data. If there is no image, then the field value is not checked.</p>

<pre><code>function(value) {
    var imgComponent = this.findParentByType('dialog').findByType('html5smartimage');
    var imgHasData = imgComponent[0].hasData();
    return ( !imgHasData || (imgHasData &amp;amp;&amp;amp; value != '') );
}
</code></pre>

    </div>
    
      <div class="pagination">
        <div class="pagination__title">
          <span class="pagination__title-h"></span>
          <hr />
        </div>
        <div class="pagination__buttons">
          
            <span class="button previous">
              <a href="/posts/the-vulnerable-external-component/">
                <span class="button__icon">←</span>
                <span class="button__text">The Vulnerable External Component</span>
              </a>
            </span>
          
          
        </div>
      </div>
    

    

  </div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2019 Powered by <a href="http://gohugo.io">Hugo</a></span>
        <span>:: Theme made by <a href="https://twitter.com/panr">panr</a></span>
      </div>
    
  </div>
</footer>

<script src="/assets/main.js"></script>
<script src="/assets/prism.js"></script>





  
</div>

</body>
</html>
